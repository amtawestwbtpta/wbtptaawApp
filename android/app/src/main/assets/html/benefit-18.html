<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>West Bengal Teachers 18 Years Benefit Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        *, ::before, ::after {
          box-sizing: border-box;
          margin: 0;
          padding: 0;
        }
        html {
          font-family: 'Inter', sans-serif;
          line-height: 1.5;
          -webkit-text-size-adjust: 100%;
        }
        body {
          background: linear-gradient(180deg, #f0f9ff 0%, #e0f2fe 100%);
          min-height: 100vh;
          display: flex;
          justify-content: center;
          align-items: flex-start;
          padding: 1rem;
        }
        .app-container {
          display: flex;
          max-width: 1200px;
          width: 100%;
          min-height: 600px;
          background: #ffffff;
          border-radius: 16px;
          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
          overflow: hidden;
          margin-top: 2rem;
        }
        .sidebar {
          width: 300px;
          background: #1e40af;
          color: #ffffff;
          padding: 2rem;
          display: flex;
          flex-direction: column;
          gap: 1.5rem;
        }
        .sidebar h1 {
          font-size: 1.5rem;
          font-weight: 600;
          line-height: 1.2;
          text-align: center; /* Centered here */
        }
        .sidebar p {
          font-size: 0.85rem;
          opacity: 0.8;
        }
        .input-group {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }
        .input-group label {
          font-size: 0.9rem;
          font-weight: 500;
          display: flex;
          align-items: center;
          gap: 0.5rem;
        }
        .input-group label svg {
          width: 16px;
          height: 16px;
          fill: #ffffff;
          opacity: 0.7;
        }
        select, input[type="number"] {
          background: rgba(255, 255, 255, 0.1);
          border: 1px solid rgba(255, 255, 255, 0.3);
          border-radius: 6px;
          padding: 0.75rem;
          color: #ffffff;
          font-size: 0.9rem;
          transition: all 0.3s ease;
        }
        select:focus, input[type="number"]:focus {
          border-color: #93c5fd;
          outline: none;
          background: rgba(255, 255, 255, 0.2);
        }
        select option {
          background: #1e3a8a;
          color: #ffffff;
        }
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
          -webkit-appearance: none;
          margin: 0;
        }
        input[type="number"] {
          -moz-appearance: textfield;
        }
        input[type="number"]::placeholder {
          color: rgba(255, 255, 255, 0.5);
        }
        button {
          background: #f97316;
          color: #ffffff;
          padding: 0.75rem;
          border-radius: 6px;
          border: none;
          font-weight: 600;
          font-size: 0.9rem;
          cursor: pointer;
          transition: background 0.3s ease;
        }
        button:hover {
          background: #ea580c;
        }
        .main-content {
          flex: 1;
          padding: 2rem;
          display: flex;
          flex-direction: column;
          gap: 1.5rem;
        }
        .result-container {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: 1.5rem;
        }
        .result-card {
          background: #f9fafb;
          border-radius: 12px;
          padding: 1.5rem;
          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
          transition: transform 0.3s ease;
        }
        .result-card:hover {
          transform: translateY(-4px);
        }
        .result-card h3 {
          font-size: 1.1rem;
          font-weight: 600;
          color: #1e3a8a;
          margin-bottom: 1rem;
        }
        .result-card p {
          font-size: 0.85rem;
          color: #4b5563;
          margin-bottom: 0.5rem;
        }
        .old-salary-card {
          border-left: 4px solid #3b82f6;
        }
        .new-salary-card {
          border-left: 4px solid #10b981;
        }
        .hike-card {
          border-left: 4px solid #ef4444;
        }
        .hidden {
          display: none;
        }
        @media (max-width: 768px) {
          .app-container {
            flex-direction: column;
          }
          .sidebar {
            width: 100%;
          }
          .result-container {
            grid-template-columns: 1fr;
          }
        }
    </style>
</head>
<body>
<div class="app-container">
    <div class="sidebar">
        <h1>West Bengal Teachers 18 Years Benefit Calculator</h1>
        <p>Calculate 18 years benefit for teachers with grade pay up to ₹4100.</p>
        <div class="input-group">
            <label>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/></svg>
                Grade Pay
            </label>
            <select id="gradePay" onchange="updateBasicPayOptions()">
                <option value="1700">1700 (Level 1)</option>
                <option value="1800">1800 (Level 2)</option>
                <option value="1900">1900 (Level 3)</option>
                <option value="2100">2100 (Level 4)</option>
                <option value="2300">2300 (Level 5)</option>
                <option value="2600">2600 (Level 6)</option>
                <option value="2900">2900 (Level 7)</option>
                <option value="3200">3200 (Level 8)</option>
                <option value="3600">3600 (Level 9)</option>
                <option value="3900">3900 (Level 10)</option>
                <option value="4100">4100 (Level 11)</option>
            </select>
        </div>
        <div class="input-group">
            <label>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/></svg>
                Basic Pay (Including Grade Pay)
            </label>
            <select id="basicPay"></select>
        </div>
        <div class="input-group">
            <label>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/></svg>
                DA Percentage (e.g., 18 for 18%)
            </label>
            <input type="number" id="daPercentage" min="0" step="0.1" value="18" placeholder="Enter DA Percentage">
        </div>
        <div class="input-group">
            <label>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/></svg>
                HRA Percentage (e.g., 12 for 12%, capped at ₹12000 for new)
            </label>
            <input type="number" id="hraPercentage" min="0" step="0.1" value="12" placeholder="Enter HRA Percentage">
        </div>
        <button onclick="calculateSalary()">Calculate Salary</button>
    </div>
    <div class="main-content">
        <div id="result" class="result-container hidden">
            <div class="result-card old-salary-card">
                <h3>Old Salary Details</h3>
                <p><strong>Old Salary (Monthly):</strong> <span id="oldSalary"></span></p>
                <p><strong>Pre-Revised Total Basic Pay:</strong> <span id="totalBasicPay"></span></p>
                <p><strong>Old Basic Pay:</strong> <span id="oldBasicPay"></span></p>
                <p><strong>DA (User Input %):</strong> <span id="oldDA"></span></p>
                <p><strong>HRA (User Input %):</strong> <span id="oldHRA"></span></p>
                <p><strong>Medical Allowance:</strong> <span id="oldMA"></span></p>
            </div>
            <div class="result-card new-salary-card">
                <h3>New Salary Details</h3>
                <p><strong>New Salary (Monthly):</strong> <span id="newSalary"></span></p>
                <p><strong>1st Increment (July):</strong> <span id="firstIncrement"></span></p>
                <p><strong>2nd Increment (Pre-Promotion):</strong> <span id="secondIncrement"></span></p>
                <p><strong>New Level:</strong> <span id="newLevel"></span></p>
                <p><strong>New Grade Pay:</strong> <span id="newGradePay"></span></p>
                <p><strong>New Basic Pay:</strong> <span id="newBasicPay"></span></p>
                <p><strong>DA (User Input %):</strong> <span id="newDA"></span></p>
                <p><strong>HRA (User Input %, max ₹12000):</strong> <span id="newHRA"></span></p>
                <p><strong>Medical Allowance:</strong> <span id="newMA"></span></p>
            </div>
            <div class="result-card hike-card">
                <h3>Hike Details</h3>
                <p><strong>Hike Amount:</strong> <span id="hikeAmount"></span></p>
            </div>
        </div>
    </div>
</div>

<script>
    // Pay matrix data
    const payMatrix = [
        { level: '1', gradePay: 1700, entryBasicPay: 17000 },
        { level: '2', gradePay: 1800, entryBasicPay: 17600 },
        { level: '3', gradePay: 1900, entryBasicPay: 18800 },
        { level: '4', gradePay: 2100, entryBasicPay: 19700 },
        { level: '5', gradePay: 2300, entryBasicPay: 21000 },
        { level: '6', gradePay: 2600, entryBasicPay: 22700 },
        { level: '7', gradePay: 2900, entryBasicPay: 27000 },
        { level: '8', gradePay: 3200, entryBasicPay: 28900 },
        { level: '9', gradePay: 3600, entryBasicPay: 31800 },
        { level: '10', gradePay: 3900, entryBasicPay: 33000 },
        { level: '11', gradePay: 4100, entryBasicPay: 33400 },
        { level: '12', gradePay: 4400, entryBasicPay: 35800 }
    ];

    // Pay matrix levels for basic pay selection
    const levelPayScales = {
        '1': [17000, 17500, 18000, 18500, 19100, 19700, 20300, 20900, 21500, 22100, 22800, 23500, 24200, 24900, 25600, 26400, 27200, 28000, 28800, 29700, 30600, 31500, 32400, 33400, 34400, 35400, 36500, 37600, 38700, 39900, 41100, 42300, 43600],
        '2': [17600, 18100, 18600, 19200, 19800, 20400, 21000, 21600, 22200, 22900, 23600, 24300, 25000, 25800, 26600, 27400, 28200, 29000, 29900, 30800, 31700, 32700, 33700, 34700, 35700, 36800, 37900, 39000, 40200, 41400, 42600, 43900, 45200],
        '3': [18800, 19400, 20000, 20600, 21200, 21800, 22500, 23200, 23900, 24600, 25300, 26100, 26900, 27700, 28500, 29400, 30300, 31200, 32100, 33100, 34100, 35100, 36200, 37300, 38400, 39600, 40800, 42000, 43300, 44600, 45900, 47300, 48700],
        '4': [19700, 20300, 20900, 21500, 22100, 22800, 23500, 24200, 24900, 25600, 26400, 27200, 28000, 28800, 29700, 30600, 31500, 32400, 33400, 34400, 35400, 36500, 37600, 38700, 39900, 41100, 42300, 43600, 44900, 46200, 47600, 49000, 50500],
        '5': [21000, 21600, 22200, 22900, 23600, 24300, 25000, 25800, 26600, 27400, 28200, 29000, 29900, 30800, 31700, 32700, 33700, 34700, 35700, 36800, 37900, 39000, 40200, 41400, 42600, 43900, 45200, 46600, 48000, 49400, 50900, 52400, 54000],
        '6': [22700, 23400, 24100, 24800, 25500, 26300, 27100, 27900, 28700, 29600, 30500, 31400, 32300, 33300, 34300, 35300, 36400, 37500, 38600, 39800, 41000, 42200, 43500, 44800, 46100, 47500, 48900, 50400, 51900, 53500, 55100, 56800, 58500],
        '7': [24700, 25400, 26200, 27000, 27800, 28600, 29500, 30400, 31300, 32200, 33200, 34200, 35200, 36300, 37400, 38500, 39700, 40900, 42100, 43400, 44700, 46000, 47400, 48800, 50300, 51800, 53400, 55000, 56700, 58400, 60200, 62000, 63900],
        '8': [27000, 27800, 28600, 29500, 30400, 31300, 32200, 33200, 34200, 35200, 36300, 37400, 38500, 39700, 40900, 42100, 43400, 44700, 46000, 47400, 48800, 50300, 51800, 53400, 55000, 56700, 58400, 60200, 62000, 63900, 65800, 67800, 69800],
        '9': [28900, 29800, 30700, 31600, 32500, 33500, 34500, 35500, 36600, 37700, 38800, 40000, 41200, 42400, 43700, 45000, 46400, 47800, 49200, 50700, 52200, 53800, 55400, 57100, 58800, 60600, 62400, 64300, 66200, 68200, 70200, 72300, 74500],
        '10': [32100, 33100, 34100, 35100, 36200, 37300, 38400, 39600, 40800, 42000, 43300, 44600, 45900, 47300, 48700, 50200, 51700, 53300, 54900, 56500, 58200, 59900, 61700, 63600, 65500, 67500, 69500, 71600, 73700, 75900, 78200, 80500, 82900],
        '11': [33400, 34400, 35400, 36500, 37600, 38700, 39900, 41100, 42300, 43600, 44900, 46200, 47600, 49000, 50500, 52000, 53600, 55200, 56900, 58600, 60400, 62200, 64100, 66000, 68000, 70000, 72100, 74300, 76500, 78800, 81200, 83600, 86100],
        '12': [35800, 36900, 38000, 39100, 40300, 41500, 42700, 44000, 45300, 46700, 48100, 49500, 51000, 52500, 54100, 55700, 57400, 59100, 60900, 62700, 64600, 66500, 68500, 70600, 72700, 74900, 77100, 79400, 81800, 84300, 86800, 89400, 92100]
    };

    function updateBasicPayOptions() {
        const gradePay = parseInt(document.getElementById('gradePay').value);
        const basicPaySelect = document.getElementById('basicPay');
        basicPaySelect.innerHTML = '';
        const level = payMatrix.find(entry => entry.gradePay === gradePay).level;
        const payScale = levelPayScales[level];
        payScale.forEach(pay => {
            const totalPay = pay;
            const option = document.createElement('option');
            option.value = totalPay;
            option.textContent = totalPay;
            basicPaySelect.appendChild(option);
        });
    }

    function calculateSalary() {
        const gradePay = parseInt(document.getElementById('gradePay').value);
        const totalBasicPay = parseInt(document.getElementById('basicPay').value);
        const daPercentage = parseFloat(document.getElementById('daPercentage').value) || 0;
        const hraPercentage = parseFloat(document.getElementById('hraPercentage').value) || 0;

        // Step 1: Find the corresponding level and pay scale
        const levelEntry = payMatrix.find(entry => entry.gradePay === gradePay);
        const level = levelEntry.level;
        const currentLevelIndex = parseInt(level);
        const payScale = levelPayScales[level];

        // Step 2: Find the current stage in the pay scale
        const currentStageIndex = payScale.indexOf(totalBasicPay);
        if (currentStageIndex === -1) {
            alert("Selected Basic Pay is not valid for the chosen Grade Pay level.");
            return;
        }

        // Step 3: Apply 1st increment in the same level (July yearly increment)
        const firstIncrement = payScale[currentStageIndex + 1] || payScale[payScale.length - 1];

        // Step 4: Apply 2nd increment in the same level (before promotion)
        const secondIncrementIndex = Math.min(currentStageIndex + 2, payScale.length - 1);
        const secondIncrement = payScale[secondIncrementIndex];

        // Step 5: Promote to the next level and match the 2nd increment
        const newLevel = currentLevelIndex < 12 ? (currentLevelIndex + 1).toString() : level;
        const newLevelPayScale = levelPayScales[newLevel];
        const newLevelGradePay = payMatrix.find(entry => entry.level === newLevel).gradePay;

        // Find a stage in the new level that either exactly matches the 2nd increment or is the next higher value
        let newBasicPay = newLevelPayScale[0];
        for (let i = 0; i < newLevelPayScale.length; i++) {
            if (newLevelPayScale[i] === secondIncrement) {
                newBasicPay = newLevelPayScale[i];
                break;
            } else if (newLevelPayScale[i] > secondIncrement) {
                newBasicPay = newLevelPayScale[i];
                break;
            }
        }

        // Step 6: Calculate old salary (pre-revised)
        const oldBasicPay = totalBasicPay;
        const oldDA = Math.round(oldBasicPay * (daPercentage / 100));
        const oldHRA = Math.round(oldBasicPay * (hraPercentage / 100));
        const oldMA = 500;
        const oldSalary = oldBasicPay + oldDA + oldHRA + oldMA;

        // Step 7: Calculate new salary (ROPA 2019)
        const newDA = Math.round(newBasicPay * (daPercentage / 100));
        const newHRA = Math.min(Math.round(newBasicPay * (hraPercentage / 100)), 12000);
        const newMA = 500;
        const newSalary = newBasicPay + newDA + newHRA + newMA;

        // Step 8: Calculate hike amount
        const hikeAmount = newSalary - oldSalary;

        // Display results
        document.getElementById('totalBasicPay').textContent = `₹${totalBasicPay}`;
        document.getElementById('firstIncrement').textContent = `₹${firstIncrement}`;
        document.getElementById('secondIncrement').textContent = `₹${secondIncrement}`;
        document.getElementById('newLevel').textContent = newLevel;
        document.getElementById('newGradePay').textContent = `₹${newLevelGradePay}`;
        document.getElementById('oldSalary').textContent = `₹${oldSalary}`;
        document.getElementById('oldBasicPay').textContent = `₹${oldBasicPay}`;
        document.getElementById('oldDA').textContent = `₹${oldDA}`;
        document.getElementById('oldHRA').textContent = `₹${oldHRA}`;
        document.getElementById('oldMA').textContent = `₹${oldMA}`;
        document.getElementById('newSalary').textContent = `₹${newSalary}`;
        document.getElementById('newBasicPay').textContent = `₹${newBasicPay}`;
        document.getElementById('newDA').textContent = `₹${newDA}`;
        document.getElementById('newHRA').textContent = `₹${newHRA}`;
        document.getElementById('newMA').textContent = `₹${newMA}`;
        document.getElementById('hikeAmount').textContent = `₹${hikeAmount}`;
        document.getElementById('result').classList.remove('hidden');
    }

    // Initialize basic pay options on page load
    updateBasicPayOptions();
</script>
</body>
</html>