<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WB Govt Employee Retirement & Earnings Calculator</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
            box-sizing: border-box;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #e2e8f0;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #94a3b8;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }
    </style>
</head>
<body class="selection:bg-blue-200 selection:text-blue-900">
<div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-md mx-auto border border-gray-200">
    <h1 class="text-3xl font-bold text-center text-blue-800 mb-6">Retirement & Earnings Calculator</h1>
    <p class="text-sm text-gray-600 text-center mb-6">For West Bengal Government Employees & Teachers</p>

    <!-- Retirement Age Calculator Section -->
    <div class="mb-8 pb-8 border-b border-gray-200">
        <h2 class="text-2xl font-semibold text-blue-700 mb-4 text-center">Retirement Date Calculator</h2>

        <!-- Date of Birth Dropdown -->
        <div class="mb-4">
            <label for="dob" class="block text-gray-700 text-sm font-semibold mb-2">
                <span class="mr-2">üéÇ</span>Date of Birth:
            </label>
            <div class="flex gap-2">
                <select id="dobDay" class="shadow-sm border rounded-lg w-1/3 py-2 px-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    <option value="" disabled selected>Day</option>
                </select>
                <select id="dobMonth" class="shadow-sm border rounded-lg w-1/3 py-2 px-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    <option value="" disabled selected>Month</option>
                    <option value="1">January</option>
                    <option value="2">February</option>
                    <option value="3">March</option>
                    <option value="4">April</option>
                    <option value="5">May</option>
                    <option value="6">June</option>
                    <option value="7">July</option>
                    <option value="8">August</option>
                    <option value="9">September</option>
                    <option value="10">October</option>
                    <option value="11">November</option>
                    <option value="12">December</option>
                </select>
                <select id="dobYear" class="shadow-sm border rounded-lg w-1/3 py-2 px-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    <option value="" disabled selected>Year</option>
                </select>
            </div>
        </div>

        <!-- Date of First Joining Service Dropdown -->
        <div class="mb-6">
            <label for="joiningDate" class="block text-gray-700 text-sm font-semibold mb-2">
                <span class="mr-2">üóìÔ∏è</span>Date of First Joining Service:
                <span class="text-gray-500 text-xs italic">(Required for Service Life calculation)</span>
            </label>
            <div class="flex gap-2">
                <select id="joiningDay" class="shadow-sm border rounded-lg w-1/3 py-2 px-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    <option value="" disabled selected>Day</option>
                </select>
                <select id="joiningMonth" class="shadow-sm border rounded-lg w-1/3 py-2 px-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    <option value="" disabled selected>Month</option>
                    <option value="1">January</option>
                    <option value="2">February</option>
                    <option value="3">March</option>
                    <option value="4">April</option>
                    <option value="5">May</option>
                    <option value="6">June</option>
                    <option value="7">July</option>
                    <option value="8">August</option>
                    <option value="9">September</option>
                    <option value="10">October</option>
                    <option value="11">November</option>
                    <option value="12">December</option>
                </select>
                <select id="joiningYear" class="shadow-sm border rounded-lg w-1/3 py-2 px-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    <option value="" disabled selected>Year</option>
                </select>
            </div>
        </div>

        <!-- Retirement Age Selection -->
        <div class="mb-6">
            <label class="block text-gray-700 text-sm font-semibold mb-3">
                <span class="mr-2">üë¥</span>Select Retirement Age:
            </label>
            <div class="flex flex-wrap gap-4 justify-center">
                <label class="inline-flex items-center cursor-pointer">
                    <input type="radio" name="retirementAge" value="60" class="form-radio h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500 rounded-full" checked>
                    <span class="ml-2 text-gray-800 text-base">60 Years</span>
                </label>
                <label class="inline-flex items-center cursor-pointer">
                    <input type="radio" name="retirementAge" value="62" class="form-radio h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500 rounded-full">
                    <span class="ml-2 text-gray-800 text-base">62 Years</span>
                </label>
                <label class="inline-flex items-center cursor-pointer">
                    <input type="radio" name="retirementAge" value="65" class="form-radio h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500 rounded-full">
                    <span class="ml-2 text-gray-800 text-base">65 Years</span>
                </label>
            </div>
        </div>

        <!-- Calculate Retirement Button -->
        <button id="calculateRetirementBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:shadow-outline transition duration-300 ease-in-out transform hover:scale-105 shadow-md">
            Calculate Retirement Date & Service Life
        </button>

        <!-- Retirement Result Display Area -->
        <div id="retirementResult" class="mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg text-center hidden">
            <p class="text-gray-800 text-lg font-medium mb-2">Your Superannuation Date:</p>
            <p id="retirementDate" class="text-blue-700 text-2xl font-extrabold mb-4"></p>
            <p class="text-gray-800 text-lg font-medium mb-2">Total Service Life:</p>
            <p id="serviceLife" class="text-blue-700 text-xl font-extrabold"></p>
            <p class="text-sm text-gray-600 mt-4">
                <span class="mr-1">üéâ</span>Congratulations on your dedicated service!
            </p>
        </div>

        <!-- Retirement Error Message Area -->
        <div id="retirementErrorMessage" class="mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg hidden">
            <p class="font-bold">Error:</p>
            <p id="retirementErrorText"></p>
        </div>
    </div>

    <!-- Lifetime Earnings Calculator Section -->
    <div>
        <h2 class="text-2xl font-semibold text-green-700 mb-4 text-center">Lifetime Earnings Calculator</h2>

        <!-- Age Now Input -->
        <div class="mb-4">
            <label for="ageNow" class="block text-gray-700 text-sm font-semibold mb-2">
                <span class="mr-2">üìÜ</span>Age Now:
            </label>
            <input type="number" id="ageNow" class="shadow-sm appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition duration-200 ease-in-out" min="1" required>
        </div>

        <!-- Current Monthly Salary Input -->
        <div class="mb-4">
            <label for="currentMonthlySalary" class="block text-gray-700 text-sm font-semibold mb-2">
                <span class="mr-2">üíµ</span>Current Monthly Salary (‚Çπ):
            </label>
            <input type="number" id="currentMonthlySalary" class="shadow-sm appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition duration-200 ease-in-out" min="0" required>
        </div>

        <!-- Annual Salary Hike (%) Input -->
        <div class="mb-6">
            <label for="annualHike" class="block text-gray-700 text-sm font-semibold mb-2">
                <span class="mr-2">üìà</span>Annual Salary Hike (%):
            </label>
            <input type="number" id="annualHike" class="shadow-sm appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition duration-200 ease-in-out" min="0" max="100" value="3">
        </div>

        <!-- Calculate Earnings Button -->
        <button id="calculateEarningsBtn" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:shadow-outline transition duration-300 ease-in-out transform hover:scale-105 shadow-md">
            Calculate Lifetime Earnings
        </button>

        <!-- Earnings Result Display Area -->
        <div id="earningsResult" class="mt-8 p-4 bg-green-50 border border-green-200 rounded-lg text-center hidden">
            <p class="text-gray-800 text-lg font-medium mb-2">Total Estimated Earnings:</p>
            <p id="totalEarnings" class="text-green-700 text-2xl font-extrabold mb-2"></p>
            <p id="totalEarningsInWords" class="text-gray-700 text-sm italic"></p>
        </div>

        <!-- Earnings Error Message Area -->
        <div id="earningsErrorMessage" class="mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg hidden">
            <p class="font-bold">Error:</p>
            <p id="earningsErrorText"></p>
        </div>
    </div>

    <!-- Information/Disclaimer -->
    <div class="mt-8 text-sm text-gray-500 text-center border-t border-gray-200 pt-6">
        <p>
            <span class="font-bold">Disclaimer:</span> These calculators provide estimated dates and figures based on the inputs provided. Official retirement dates and earnings are subject to government rules, individual service records, and economic factors.
        </p>
    </div>
</div>

<script>
    // Populate dropdowns for days and years
    function populateDropdowns() {
        const dobDay = document.getElementById('dobDay');
        const joiningDay = document.getElementById('joiningDay');
        const dobYear = document.getElementById('dobYear');
        const joiningYear = document.getElementById('joiningYear');

        // Populate days (1 to 31)
        for (let i = 1; i <= 31; i++) {
            const option1 = document.createElement('option');
            option1.value = i;
            option1.textContent = i;
            dobDay.appendChild(option1);

            const option2 = document.createElement('option');
            option2.value = i;
            option2.textContent = i;
            joiningDay.appendChild(option2);
        }

        // Populate years (1900 to current year)
        const currentYear = new Date().getFullYear();
        for (let i = currentYear; i >= 1900; i--) {
            const option1 = document.createElement('option');
            option1.value = i;
            option1.textContent = i;
            dobYear.appendChild(option1);

            const option2 = document.createElement('option');
            option2.value = i;
            option2.textContent = i;
            joiningYear.appendChild(option2);
        }
    }

    // --- Retirement Calculator Elements ---
    const dobDayInput = document.getElementById('dobDay');
    const dobMonthInput = document.getElementById('dobMonth');
    const dobYearInput = document.getElementById('dobYear');
    const joiningDayInput = document.getElementById('joiningDay');
    const joiningMonthInput = document.getElementById('joiningMonth');
    const joiningYearInput = document.getElementById('joiningYear');
    const calculateRetirementBtn = document.getElementById('calculateRetirementBtn');
    const retirementDateDisplay = document.getElementById('retirementDate');
    const serviceLifeDisplay = document.getElementById('serviceLife');
    const retirementResultDiv = document.getElementById('retirementResult');
    const retirementErrorMessageDiv = document.getElementById('retirementErrorMessage');
    const retirementErrorText = document.getElementById('retirementErrorText');

    // --- Lifetime Earnings Calculator Elements ---
    const ageNowInput = document.getElementById('ageNow');
    const currentMonthlySalaryInput = document.getElementById('currentMonthlySalary');
    const annualHikeInput = document.getElementById('annualHike');
    const calculateEarningsBtn = document.getElementById('calculateEarningsBtn');
    const totalEarningsDisplay = document.getElementById('totalEarnings');
    const totalEarningsInWordsDisplay = document.getElementById('totalEarningsInWords');
    const earningsResultDiv = document.getElementById('earningsResult');
    const earningsErrorMessageDiv = document.getElementById('earningsErrorMessage');
    const earningsErrorText = document.getElementById('earningsErrorText');

    /**
     * Hides a specific error message div.
     * @param {HTMLElement} errorDiv - The error message div to hide.
     * @param {HTMLElement} errorTextElement - The text element within the error div.
     */
    function hideErrorMessage(errorDiv, errorTextElement) {
        errorDiv.classList.add('hidden');
        errorTextElement.textContent = '';
    }

    /**
     * Displays a specific error message.
     * @param {HTMLElement} resultDiv - The result div to hide if an error occurs.
     * @param {HTMLElement} errorDiv - The error message div to show.
     * @param {HTMLElement} errorTextElement - The text element within the error div.
     * @param {string} message - The error message to display.
     */
    function showErrorMessage(resultDiv, errorDiv, errorTextElement, message) {
        resultDiv.classList.add('hidden');
        errorDiv.classList.remove('hidden');
        errorTextElement.textContent = message;
    }

    /**
     * Validates if a date is valid.
     * @param {number} day - Day of the month.
     * @param {number} month - Month (1-12).
     * @param {number} year - Year.
     * @returns {boolean} True if the date is valid, false otherwise.
     */
    function isValidDate(day, month, year) {
        const date = new Date(year, month - 1, day);
        return date.getDate() == day && date.getMonth() + 1 == month && date.getFullYear() == year;
    }

    /**
     * Calculates the difference between two dates in years, months, and days.
     * @param {Date} date1 - The earlier date (e.g., Joining Date).
     * @param {Date} date2 - The later date (e.g., Retirement Date).
     * @returns {string} Formatted string "YY years, MM months, DD days".
     */
    function calculateDateDifference(date1, date2) {
        let years = date2.getFullYear() - date1.getFullYear();
        let months = date2.getMonth() - date1.getMonth();
        let days = date2.getDate() - date1.getDate();

        if (days < 0) {
            months--;
            const daysInPrevMonth = new Date(date2.getFullYear(), date2.getMonth(), 0).getDate();
            days = daysInPrevMonth + days;
        }

        if (months < 0) {
            years--;
            months = 12 + months;
        }

        if (years < 0 || (years === 0 && months < 0) || (years === 0 && months === 0 && days < 0)) {
            return "Invalid date range for service life";
        }

        return `${years} years, ${months} months, ${days} days`;
    }

    // --- Retirement Date Calculation Logic ---
    calculateRetirementBtn.addEventListener('click', () => {
        hideErrorMessage(retirementErrorMessageDiv, retirementErrorText);

        const dobDay = parseInt(dobDayInput.value);
        const dobMonth = parseInt(dobMonthInput.value);
        const dobYear = parseInt(dobYearInput.value);
        const joiningDay = parseInt(joiningDayInput.value);
        const joiningMonth = parseInt(joiningMonthInput.value);
        const joiningYear = parseInt(joiningYearInput.value);

        if (!dobDay || !dobMonth || !dobYear) {
            showErrorMessage(retirementResultDiv, retirementErrorMessageDiv, retirementErrorText, "Please select a complete Date of Birth (Day, Month, Year).");
            return;
        }
        if (!joiningDay || !joiningMonth || !joiningYear) {
            showErrorMessage(retirementResultDiv, retirementErrorMessageDiv, retirementErrorText, "Please select a complete Date of First Joining Service (Day, Month, Year).");
            return;
        }

        if (!isValidDate(dobDay, dobMonth, dobYear)) {
            showErrorMessage(retirementResultDiv, retirementErrorMessageDiv, retirementErrorText, "Invalid Date of Birth. Please select a valid date.");
            return;
        }
        if (!isValidDate(joiningDay, joiningMonth, joiningYear)) {
            showErrorMessage(retirementResultDiv, retirementErrorMessageDiv, retirementErrorText, "Invalid Date of First Joining Service. Please select a valid date.");
            return;
        }

        const dob = new Date(dobYear, dobMonth - 1, dobDay);
        const joiningDate = new Date(joiningYear, joiningMonth - 1, joiningDay);
        const currentDate = new Date();

        if (joiningDate > currentDate) {
            showErrorMessage(retirementResultDiv, retirementErrorMessageDiv, retirementErrorText, "Date of Joining Service cannot be in the future.");
            return;
        }
        if (joiningDate < dob) {
            showErrorMessage(retirementResultDiv, retirementErrorMessageDiv, retirementErrorText, "Date of First Joining Service cannot be before Date of Birth.");
            return;
        }

        const selectedAgeElement = document.querySelector('input[name="retirementAge"]:checked');
        if (!selectedAgeElement) {
            showErrorMessage(retirementResultDiv, retirementErrorMessageDiv, retirementErrorText, "Please select a Retirement Age.");
            return;
        }
        const retirementAge = parseInt(selectedAgeElement.value, 10);

        let retirementDate = new Date(dob);
        retirementDate.setFullYear(dob.getFullYear() + retirementAge);

        if (dob.getDate() === 1) {
            retirementDate.setDate(0);
        } else {
            retirementDate.setMonth(retirementDate.getMonth() + 1);
            retirementDate.setDate(0);
        }

        if (joiningDate > retirementDate) {
            showErrorMessage(retirementResultDiv, retirementErrorMessageDiv, retirementErrorText, "Date of Joining Service cannot be after the calculated Retirement Date.");
            return;
        }

        const options = { year: 'numeric', month: 'long', day: 'numeric' };
        const formattedRetirementDate = retirementDate.toLocaleDateString('en-IN', options);
        const serviceLife = calculateDateDifference(joiningDate, retirementDate);

        retirementDateDisplay.textContent = formattedRetirementDate;
        serviceLifeDisplay.textContent = serviceLife;
        retirementResultDiv.classList.remove('hidden');
    });

    // --- Utility function to convert numbers to Indian words ---
    function convertNumberToIndianWords(num) {
        if (num === 0) return "Zero Rupees";

        const units = ["", "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine"];
        const teens = ["Ten", "Eleven", "Twelve", "Thirteen", "Fourteen", "Fifteen", "Sixteen", "Seventeen", "Eighteen", "Nineteen"];
        const tens = ["", "", "Twenty", "Thirty", "Forty", "Fifty", "Sixty", "Seventy", "Eighty", "Ninety"];
        const thousands = ["", "Thousand", "Lakh", "Crore", "Arab", "Kharab"];

        function convertLessThanThousand(n) {
            let s = "";
            if (Math.floor(n / 100) > 0) {
                s += units[Math.floor(n / 100)] + " Hundred ";
                n %= 100;
            }
            if (n > 0) {
                if (n < 20) {
                    s += teens[n - 10] || units[n];
                } else {
                    s += tens[Math.floor(n / 10)];
                    if (n % 10 > 0) {
                        s += " " + units[n % 10];
                    }
                }
            }
            return s;
        }

        let result = "";
        let i = 0;
        let currentNum = Math.floor(num);

        if (currentNum === 0) return "Zero Rupees";

        let chunk = currentNum % 1000;
        if (chunk > 0) {
            result = convertLessThanThousand(chunk) + result;
        }
        currentNum = Math.floor(currentNum / 1000);
        i++;

        while (currentNum > 0) {
            chunk = currentNum % 100;
            if (chunk > 0) {
                let chunkWords = "";
                if (chunk < 20) {
                    chunkWords = teens[chunk - 10] || units[chunk];
                } else {
                    chunkWords = tens[Math.floor(chunk / 10)];
                    if (chunk % 10 > 0) {
                        chunkWords += " " + units[chunk % 10];
                    }
                }
                result = chunkWords + " " + thousands[i] + " " + result;
            }
            currentNum = Math.floor(currentNum / 100);
            i++;
        }

        return result.trim() + " Rupees";
    }

    // --- Lifetime Earnings Calculation Logic ---
    calculateEarningsBtn.addEventListener('click', () => {
        hideErrorMessage(earningsErrorMessageDiv, earningsErrorText);

        const ageNow = parseInt(ageNowInput.value, 10);
        const currentMonthlySalary = parseFloat(currentMonthlySalaryInput.value);
        const annualHike = parseFloat(annualHikeInput.value);

        if (isNaN(ageNow) || ageNow <= 0) {
            showErrorMessage(earningsResultDiv, earningsErrorMessageDiv, earningsErrorText, "Please enter a valid 'Age Now'.");
            return;
        }
        if (isNaN(currentMonthlySalary) || currentMonthlySalary < 0) {
            showErrorMessage(earningsResultDiv, earningsErrorMessageDiv, earningsErrorText, "Please enter a valid 'Current Monthly Salary'.");
            return;
        }
        if (isNaN(annualHike) || annualHike < 0) {
            showErrorMessage(earningsResultDiv, earningsErrorMessageDiv, earningsErrorText, "Please enter a valid 'Annual Salary Hike (%)'.");
            return;
        }

        const selectedRetirementAgeElement = document.querySelector('input[name="retirementAge"]:checked');
        if (!selectedRetirementAgeElement) {
            showErrorMessage(earningsResultDiv, earningsErrorMessageDiv, earningsErrorText, "Please select a Retirement Age in the section above to calculate earnings.");
            return;
        }
        const retirementAge = parseInt(selectedRetirementAgeElement.value, 10);

        if (ageNow >= retirementAge) {
            showErrorMessage(earningsResultDiv, earningsErrorMessageDiv, earningsErrorText, "Your current age is at or beyond the selected retirement age. No further earnings estimated.");
            totalEarningsDisplay.textContent = "‚Çπ 0";
            totalEarningsInWordsDisplay.textContent = "(Zero Rupees)";
            earningsResultDiv.classList.remove('hidden');
            return;
        }

        let totalEstimatedEarnings = 0;
        let currentAnnualSalary = currentMonthlySalary * 12;
        const hikeMultiplier = 1 + (annualHike / 100);

        for (let i = ageNow; i < retirementAge; i++) {
            totalEstimatedEarnings += currentAnnualSalary;
            currentAnnualSalary *= hikeMultiplier;
        }

        totalEarningsDisplay.textContent = `‚Çπ ${totalEstimatedEarnings.toLocaleString('en-IN', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;
        const earningsInWords = convertNumberToIndianWords(totalEstimatedEarnings);
        totalEarningsInWordsDisplay.textContent = `(${earningsInWords})`;
        earningsResultDiv.classList.remove('hidden');
    });

    // Initial setup
    document.addEventListener('DOMContentLoaded', () => {
        hideErrorMessage(retirementErrorMessageDiv, retirementErrorText);
        hideErrorMessage(earningsErrorMessageDiv, earningsErrorText);
        populateDropdowns();
    });
</script>
</body>
</html>